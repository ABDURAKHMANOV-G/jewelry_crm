{% extends 'base.html' %}

{% block title %}–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">üìä –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–∞ –æ —Ä–∞–±–æ—Ç–µ</h4>
            </div>
            <div class="card-body">
                <p class="text-muted mb-4">–í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥ –∏ —Å–æ–∑–¥–∞–π—Ç–µ –æ—Ç—á—ë—Ç –æ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏ –û–û–û ¬´JEWEllUX¬ª</p>
                
                <form method="GET" action="{% url 'report_generate' %}">
                    <div class="mb-3">
                        <label for="start_date" class="form-label"><strong>üìÖ –ù–∞—á–∞–ª–æ –ø–µ—Ä–∏–æ–¥–∞</strong></label>
                        <input type="date" class="form-control" id="start_date" name="start_date" required>
                    </div>
                    
                    <div class="mb-4">
                        <label for="end_date" class="form-label"><strong>üìÖ –ö–æ–Ω–µ—Ü –ø–µ—Ä–∏–æ–¥–∞</strong></label>
                        <input type="date" class="form-control" id="end_date" name="end_date" required>
                    </div>
                    
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-primary flex-grow-1">
                            <i class="bi bi-search"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç—á—ë—Ç
                        </button>
                        <a href="{% url 'order_list' %}" class="btn btn-secondary">
                            –û—Ç–º–µ–Ω–∞
                        </a>
                    </div>
                </form>
                
                <!-- –ë—ã—Å—Ç—Ä—ã–µ –ø–µ—Ä–∏–æ–¥—ã -->
                <hr>
                <p class="text-muted small mb-3">–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞:</p>
                
                <div class="btn-group-vertical w-100" role="group">
                    <form method="GET" action="{% url 'report_generate' %}" style="display: inline;">
                        <input type="hidden" name="start_date" id="quick_start_today">
                        <input type="hidden" name="end_date" id="quick_end_today">
                        <button type="submit" class="btn btn-outline-primary w-100 text-start">–°–µ–≥–æ–¥–Ω—è</button>
                    </form>
                    
                    <form method="GET" action="{% url 'report_generate' %}" style="display: inline;">
                        <input type="hidden" name="start_date" id="quick_start_week">
                        <input type="hidden" name="end_date" id="quick_end_week">
                        <button type="submit" class="btn btn-outline-primary w-100 text-start">–ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ</button>
                    </form>
                    
                    <form method="GET" action="{% url 'report_generate' %}" style="display: inline;">
                        <input type="hidden" name="start_date" id="quick_start_month">
                        <input type="hidden" name="end_date" id="quick_end_month">
                        <button type="submit" class="btn btn-outline-primary w-100 text-start">–í —ç—Ç–æ–º –º–µ—Å—è—Ü–µ</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã
    function formatDate(date) {
        return date.toISOString().split('T')[0];
    }
    
    const today = new Date();
    
    // –°–µ–≥–æ–¥–Ω—è
    document.getElementById('quick_start_today').value = formatDate(today);
    document.getElementById('quick_end_today').value = formatDate(today);
    
    // –ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ (–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ - —Å–µ–≥–æ–¥–Ω—è)
    const currentDay = today.getDay();
    const monday = new Date(today);
    monday.setDate(today.getDate() - (currentDay === 0 ? 6 : currentDay - 1));
    document.getElementById('quick_start_week').value = formatDate(monday);
    document.getElementById('quick_end_week').value = formatDate(today);
    
    // –í —ç—Ç–æ–º –º–µ—Å—è—Ü–µ
    const firstDay = new Date(today.getFullYear(), today.getMonth(), 1);
    document.getElementById('quick_start_month').value = formatDate(firstDay);
    document.getElementById('quick_end_month').value = formatDate(today);
});
</script>
{% endblock %}
