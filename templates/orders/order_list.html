{% extends 'base.html' %}

{% block title %}–ú–æ–∏ –∑–∞–∫–∞–∑—ã{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>
        {% if user.role == 'manager' %}
            –í—Å–µ –∑–∞–∫–∞–∑—ã
        {% else %}
            –ú–æ–∏ –∑–∞–∫–∞–∑—ã
        {% endif %}
    </h2>
    {% if user.role == 'client' %}
    <a href="{% url 'order_create' %}" class="btn btn-primary">
        <i class="bi bi-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
    </a>
    {% endif %}
</div>

{% if orders %}
<div class="table-responsive">
    <table class="table table-hover table-striped">
        <thead class="table-dark">
            <tr>
                <th>‚Ññ</th>
                <th>–¢–∏–ø –∏–∑–¥–µ–ª–∏—è</th>
                <th>–¢–∏–ø –∑–∞–∫–∞–∑–∞</th>
                <th>–ö–ª–∏–µ–Ω—Ç</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>–ë—é–¥–∂–µ—Ç</th>
                <th>–°–æ–∑–¥–∞–Ω</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for order in orders %}
            <tr>
                <td><strong>#{{ order.order_id }}</strong></td>
                <td>
                    {% if order.product_type == 'ring' %}üíç –ö–æ–ª—å—Ü–æ
                    {% elif order.product_type == 'brooch' %}üå∏ –ë—Ä–æ—à—å
                    {% elif order.product_type == 'bracelet' %}üìø –ë—Ä–∞—Å–ª–µ—Ç
                    {% elif order.product_type == 'earrings' %}üíé –°–µ—Ä—å–≥–∏
                    {% else %}-{% endif %}
                </td>
                <td>
                    {% if order.order_type == 'template' %}üìã –®–∞–±–ª–æ–Ω–Ω—ã–π
                    {% elif order.order_type == 'custom' %}‚úèÔ∏è –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π
                    {% else %}-{% endif %}
                </td>
                <td>{{ order.customer.name }} {{ order.customer.surname }}</td>
                <td>
                    <span class="badge 
                        {% if order.order_status == 'new' %}bg-primary
                        {% elif order.order_status == 'confirmed' %}bg-info
                        {% elif order.order_status == 'in_work' %}bg-warning
                        {% elif order.order_status == 'ready' %}bg-success
                        {% elif order.order_status == 'delivered' %}bg-secondary
                        {% endif %}
                    ">
                        {{ order.get_status_display_ru }}
                    </span>
                </td>
                <td>{{ order.budget|default:"-" }} ‚ÇΩ</td>
                <td>{{ order.created_at|date:"d.m.Y" }}</td>
                <td>
                    <a href="{% url 'order_detail' order.order_id %}" class="btn btn-sm btn-primary">
                        –û—Ç–∫—Ä—ã—Ç—å
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<p class="text-muted mt-3">–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤: {{ orders|length }}</p>

{% else %}
<div class="alert alert-info text-center">
    <h4>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</h4>
    {% if user.role == 'client' %}
    <p>–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑!</p>
    <a href="{% url 'order_create' %}" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}
