{% extends 'base.html' %}
{% load static %}

{% block title %}–ú–æ–∏ –∑–∞–∫–∞–∑—ã - JEWEllUX{% endblock %}

{% block content %}
<section class="orders-section">
    <div class="container-orders">
        <div class="orders-header">
            <h2 class="orders-title">
                {% if user.role == 'manager' %}
                    <i class="bi bi-clipboard-check"></i> –í—Å–µ –∑–∞–∫–∞–∑—ã
                {% else %}
                    <i class="bi bi-bag-check"></i> –ú–æ–∏ –∑–∞–∫–∞–∑—ã
                {% endif %}
            </h2>
            {% if user.role == 'client' %}
            <a href="{% url 'order_create' %}" class="btn-gold">
                <i class="bi bi-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
            </a>
            {% endif %}
        </div>

        {% if orders %}
        <div class="orders-table-wrapper">
            <table class="orders-table">
                <thead>
                    <tr>
                        <th>‚Ññ</th>
                        <th>–¢–∏–ø –∏–∑–¥–µ–ª–∏—è</th>
                        <th>–¢–∏–ø –∑–∞–∫–∞–∑–∞</th>
                        <th>–ö–ª–∏–µ–Ω—Ç</th>
                        <th>–°—Ç–∞—Ç—É—Å</th>
                        <th>–ë—é–¥–∂–µ—Ç</th>
                        <th>–°–æ–∑–¥–∞–Ω</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in orders %}
                    <tr>
                        <td><strong>#{{ order.order_id }}</strong></td>
                        <td>
                            <span class="product-type">
                                {% if order.product_type == 'ring' %}üíç –ö–æ–ª—å—Ü–æ
                                {% elif order.product_type == 'brooch' %}üå∏ –ë—Ä–æ—à—å
                                {% elif order.product_type == 'bracelet' %}üìø –ë—Ä–∞—Å–ª–µ—Ç
                                {% elif order.product_type == 'earrings' %}üíé –°–µ—Ä—å–≥–∏
                                {% else %}-{% endif %}
                            </span>
                        </td>
                        <td>
                            {% if order.order_type == 'template' %}
                                <span class="order-type template">üìã –®–∞–±–ª–æ–Ω–Ω—ã–π</span>
                            {% elif order.order_type == 'custom' %}
                                <span class="order-type custom">‚úèÔ∏è –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π</span>
                            {% else %}-{% endif %}
                        </td>
                        <td>{{ order.customer.name }} {{ order.customer.surname }}</td>
                        <td>
                            <span class="status-badge status-{{ order.order_status }}">
                                {{ order.get_status_display_ru }}
                            </span>
                        </td>
                        <td class="budget">{{ order.budget|default:"-" }} ‚ÇΩ</td>
                        <td class="date">{{ order.created_at|date:"d.m.Y" }}</td>
                        <td>
                            <a href="{% url 'order_detail' order.order_id %}" class="btn-view">
                                –û—Ç–∫—Ä—ã—Ç—å
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <p class="orders-count">–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤: {{ orders|length }}</p>

        {% else %}
        <div class="no-orders">
            <i class="bi bi-inbox"></i>
            <h4>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</h4>
            {% if user.role == 'client' %}
            <p>–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ –Ω–∞ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–µ —é–≤–µ–ª–∏—Ä–Ω–æ–µ –∏–∑–¥–µ–ª–∏–µ!</p>
            <a href="{% url 'order_create' %}" class="btn-gold btn-lg">
                <i class="bi bi-plus-circle"></i> –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
            </a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}
